"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79792],{3353:(e,t,r)=>{r.d(t,{J:()=>u});var a=r(532850),o=r(360662),n=r(50042),s=r(655515),i=r(119349),d=r(981278),l=r(455729);let{shutterstockBaseUrl:c}=(0,s.K)(),u=e=>{let{couponCode:t,displayInlineCancellationFlow:r,additionalQueryParams:s={}}=e,u=(0,d.useRouter)(),p=(0,o.Q)(),m=!!p?.current?.isPeacock;return(0,l.useCallback)(e=>{let{orderId:o}=e,d=(0,i.BF)({language:u.locale,baseUrl:c,pathname:(0,n.DG)({queryParams:{orderId:o,...s,...u?.query||{},...m&&{isCreativeAiOrder:"true"},...t?{[a.m]:t,[a.AW]:t}:{},...r&&{display:"inlineCancellationFlow"}}})});window.location=d},[t,m,u,r,s])}},56979:(e,t,r)=>{r.d(t,{$:()=>d});var a=r(487519),o=r(183014),n=r(531950),s=r(884378);let i=e=>{let{queryParams:t}=e;return(0,a.uy)({queryParams:t}).formattedUrl},d=function(){let{queryParams:e={},shouldFetch:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.P)(t?i({queryParams:e}):null,e=>n.Bn.get(e).then(e=>(0,s.A)(e.data)))}},66707:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>w});var a=r(406029),o=r(464839),n=r(215075),s=r(926114),i=r(811401),d=r(513372),l=r(727326),c=r(532850),u=r(882431),p=r(911449),m=r(461266),y=r(568880),h=r(455729);let b=(0,r(807703).n9)()(()=>({buttonProgress:{position:"absolute"}})),f=e=>{let{t}=e;return{buyAndDownload:t("activation-drawers:pricing_checkout_download_label")}},C=e=>{let{product:t,selectedProductLicenseType:r}=e,{license:a}=r,{name:o}=t;return a&&o?`${l.lnH} - ${a}License - ${o}`:l.lnH},w=e=>{let{classes:t=m.vB,asset:r,assetSize:l,couponCode:w="",isDisabled:N=!1,product:v,productType:g=c.PZ,selectedShadowsOption:A,selectedProductLicenseType:P=m.vB,setCreateOrderStatus:k=m.lQ,vatNumber:x,labelText:_,className:D}=e,[O,I]=(0,h.useState)(!1),{classes:T,cx:E}=b(),{t:S,ready:B}=(0,y.Bd)(s.sVY),L=f({t:S}),{license:U}=P,{createOrderHandler:F,isCreateOrderInProgress:M}=(0,p.s)({orderFlow:u.Y.IMAGE_DOWNLOAD_PANEL,asset:r,assetSize:l,couponCode:w,productOverride:v,productType:g,vatNumber:x,setCreateOrderStatus:k,license:U,selectedShadowsOption:A,isLicenseDrawer:!0}),z=M||!B||N||!O,j=C({product:v,selectedProductLicenseType:P});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.l,{asset:r,isTermsChecked:O,setTermsCheckbox:I}),(0,a.jsxs)(d.$n,{className:E(T.buyAndDownloadButton,t.buyAndDownloadButton,D),"aria-label":_||L.buyAndDownload,variant:"contained",color:"secondary",onClick:F,fullWidth:!0,disabled:z,labelTrack:j,children:[M&&(0,a.jsx)(o.A,{color:"inherit",size:24,className:E(T.buttonProgress,t.buyAndDownloadButton)}),_||(B?L.buyAndDownload:(0,a.jsx)(n.A,{variant:"text",width:"100%"}))]})]})}},137197:(e,t,r)=>{r.d(t,{m:()=>u});var a=r(581298),o=r(430091),n=r(813400),s=r(315888),i=r(813631),d=r(233661);let l=e=>{let{assetType:t,productName:r,utmMedium:a,region:o,inUnlimitedExperience:l}=e,c=!r||[s.keR,s.lcL,...s.gnm,...s.BfY].includes(r),u=!t||t===i.W1,p=d.rK.includes(a??"");return!!(o===n.u3&&!p&&!l&&c&&u)};var c=r(184905);let u=e=>{let{productName:t,assetType:r}=e,n=(0,c.H)(),{region:s}=(0,a.Y)(),{utmMedium:i}=(0,o.Y)();return l({productName:t,utmMedium:i,inUnlimitedExperience:n,region:s,assetType:r})}},153145:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>f});var a=r(406029),o=r(464839),n=r(513372),s=r(485650),i=r(532850),d=r(808059),l=r(670283),c=r(952872),u=r(882431),p=r(580030),m=r(911449),y=r(30721),h=r(52492);let b=(e,t,r)=>(0,p.OK)(e)?s.rTe:r?s.PtZ[t]:s.or1[t],f=e=>{let{asset:t,assetSizeStateId:r,assetType:s,buttonConfig:p={showIcon:!0,variant:"contained",color:"secondary"},clickAnalyticsLabel:f,clickAnalyticsLabelMap:C,label:w,orderFlow:N=u.Y.UNLIMITED_CONVERSION_PANEL,product:v,setStateOnLoggedOutClick:g,termsCheckboxStateId:A,shouldUseSignupModal:P=!0,enhancedLicense:k=!1}=e,x=(0,y.i9)(),{setStates:_}=(0,d.h6)(),D=(0,d.Cw)(r),O=(0,d.Cw)(A??"")??!0,I=b(t,s,k),{isEligibleForCon64AnonymousCheckoutExperiment:T}=(0,l.T)(),E={orderFlow:N,productType:i.PZ,asset:t,productOverride:v,shouldForceAsset:!0,assetSize:D,license:I},{isCreateOrderInProgress:S,createOrderHandler:B,createOrderHandlerLoading:L}=(0,m.s)(E),{createOrderHandler:U,isCreateOrderInProgress:F}=(0,c.L)(E),M=F||S||L||!O;return(0,a.jsxs)(n.$n,{"aria-label":w,disabled:M,fullWidth:!0,onClick:T?()=>{U()}:()=>{!x&&P?_(g):B()},labelTrack:C?.[v?.name||""]||f,variant:p.variant,color:p.color,style:{marginBottom:"8px"},children:[S&&(0,a.jsx)(o.A,{color:"inherit",size:24,style:{position:"absolute"}}),p.showIcon&&(0,a.jsx)(h.Download,{style:{padding:"2px",marginRight:"4px"}}),w]})}},262139:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>v,getAnalyticsLabel:()=>N});var a=r(406029),o=r(464839),n=r(215075),s=r(926114),i=r(291753),d=r(517596),l=r(811401),c=r(513372),u=r(727326),p=r(532850),m=r(882431),y=r(911449),h=r(461266),b=r(568880),f=r(455729);let C=(0,r(807703).n9)()(e=>{let{tokens:{spacing:t}}=e;return{buttonProgress:{position:"absolute"},downloadButton:{marginTop:t.base}}}),w=e=>{let{t}=e;return{buyAndDownload:t("activation-drawers:pricing_checkout_download_label")}},N=e=>{let{product:t,selectedProductLicenseType:r,hasActiveMembershipSub:a}=e,{license:o}=r,{name:n}=t;if(o&&n){let e=`${u.lnH} - ${o}License - ${n}`;return`${a?`${e} - ${i.jQ}`:e}`}return u.lnH},v=e=>{let{asset:t,assetSize:r,couponCode:v="",isDisabled:g=!1,product:A,productType:P=p.PZ,selectedProductLicenseType:k=h.vB,setCreateOrderStatus:x=h.lQ,selectedShadowsOption:_,vatNumber:D,eligibilityData:O=h.vB,labelText:I,membershipProps:T=h.vB}=e,{isEligibleForEnhanceLicensingSingleAsset:E}=(0,d.r)(),{classes:S}=C(),[B,L]=(0,f.useState)(!1),{t:U,ready:F}=(0,b.Bd)(s.sVY),M=w({t:U}),{license:z}=k,{hasActiveMembershipSub:j}=T,{createOrderHandler:R,isCreateOrderInProgress:Y}=(0,y.s)({orderFlow:m.Y.LICENSING_DRAWER,asset:t,assetSize:r,couponCode:v,productOverride:A,productType:P,vatNumber:D,setCreateOrderStatus:x,selectedShadowsOption:_,license:z,isLicenseDrawer:!0,eligibilityData:O}),$=Y||!F||g||!B,G=E?u.Bni:N({product:A,selectedProductLicenseType:k,hasActiveMembershipSub:j}),J=j?i.DB:I;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.l,{asset:t,isTermsChecked:B,setTermsCheckbox:L}),(0,a.jsxs)(c.$n,{"aria-label":J||M.buyAndDownload,"data-automation":`${J||u.lnH}_button`,variant:"contained",color:"secondary",onClick:R,fullWidth:!0,disabled:$,labelTrack:G,className:S.downloadButton,children:[Y&&(0,a.jsx)(o.A,{color:"inherit",size:24,className:S.buttonProgress}),J||(F?M.buyAndDownload:(0,a.jsx)(n.A,{variant:"text",width:"100%"}))]})]})}},291753:(e,t,r)=>{r.d(t,{DB:()=>c,TE:()=>m,a_:()=>u,ay:()=>i,cy:()=>l,e7:()=>d,jQ:()=>p,lY:()=>o,rY:()=>s,vB:()=>n});var a=r(315888);let o="LICENSING",n="LOADING",s="PURCHASING",i="none",d={[a.zWM]:2,[a.InX]:5,[a.gtC]:25,[a.W_1]:2,[a.HCH]:5,[a.xh8]:25},l="Download for free",c="Download",u="Tier100",p="NonTier100",m="eligibilityErrorNoEligibility"},346504:(e,t,r)=>{r.d(t,{JA:()=>f,Up:()=>y,Z0:()=>h,bV:()=>N,dV:()=>b,eb:()=>C,kI:()=>m,mk:()=>w,wb:()=>u});var a=r(9549),o=r(485650),n=r(831664),s=r(581298),i=r(612847),d=r(302168),l=r(198795),c=r(455729);let u=e=>{let{prices:t,name:r}=e,{currencyData:{currency:o=a.OS}}=(0,s.Y)(),n=(0,i.F)({productName:r,currency:o});return(0,d.zn)({prices:t,localeCurrency:n})},p=e=>{let{basePrice:t,pricePerSeat:r,seatCount:a}=e;return t?t+r*a:NaN},m=e=>{let{product:t}=e,{prices:r={},pricesPerSeat:a={},seatCount:o,downloadCredits:n,commitmentLength:s,id:i,name:d}=t,c=u({prices:r,name:d}),m=r[c?.toLowerCase()]??NaN,y=a[c?.toLowerCase()]??NaN,h=m,b=n&&1===s?12*n:n||1;return"17438"!==i||n||(b=2),y&&o&&(h=p({basePrice:m,pricePerSeat:y,seatCount:o})),(0,l.f)(h/b,c)??void 0},y=e=>{let{product:t,promotion:r=0}=e,{prices:a={},pricesPerSeat:o={},seatCount:n,name:s}=t||{},i=u({prices:a,name:s}),d=a[i?.toLowerCase()]??NaN,c=o[i?.toLowerCase()],m=d;return r>0&&(m=Math.round(d*(1-r))),c&&n&&(m=p({basePrice:d,pricePerSeat:c,seatCount:n})),(0,l.f)(m,i)},h=e=>{let{activeTab:t,productGroup:r,productToCompare:a=n.XN}=e,{prices:o}={prices:{}},s=u({prices:o}),{products:i={}}=r,d=i[t],c=12*(d?.[a]?.prices?.[s?.toLowerCase()]??NaN)-(d?.[n.Ww]?.prices?.[s?.toLowerCase()]??NaN),p=(0,l.f)(c,s);return c>0?p:null},b=e=>{let{price:t,product:r}=e,{prices:a,name:o}=r,n=u({prices:a,name:o});return(0,l.f)(t,n)},f=e=>{let{product:t,downloadsPerMonth:r,discountPercentage:a=0,selectedProductLicenseType:n=""}=e,s=u({prices:t?.prices??{},name:t?.name}),{pricePerPaymentInterval:i,pricePerMonth:p,pricePerAsset:m,pricePerAssetDiscounted:y,priceDiscounted:h}=(0,c.useMemo)(()=>{let e=(0,d.f8)({product:t??{}}),i=(0,d.Eu)({product:t}),l=n===o.ZI1,c=2*!["KRW","JPY"].includes(s),u=(0,d.Fj)({product:t??{}}),p=u&&!i?12:1,m=t?.prices?.[s.toLowerCase()]??NaN,y=m-m/100*a,h=u?(m/12).toFixed(c):m,b=l?(t?.allotmentCredits||0)/20:t?.allotmentCredits??NaN,f=(m/p/((e?b:t?.allotmentCredits)??NaN)).toFixed(c),C=a?(y/p/(t?.allotmentCredits??r??NaN)).toFixed(c):f;return{priceDiscounted:y,pricePerMonth:h,pricePerAsset:f,pricePerAssetDiscounted:C,pricePerPaymentInterval:m}},[s,r,t,a,n]);return{pricePerAsset:m,formattedPricePerPaymentInterval:(0,l.f)(i,s),formattedPricePerMonth:(0,l.f)(p,s),formattedPricePerAsset:(0,l.f)(m,s),formattedPricePerAssetDiscounted:(0,l.f)(y,s),formattedPriceDiscounted:(0,l.f)(h,s)}},C=e=>{let{product:t,singleClipProduct:r}=e,{prices:a,allotmentCredits:o}=t,n=u({prices:a}),s=a[n.toLowerCase()]??NaN,i=r?.prices?.[n.toLowerCase()]??NaN,d=(s/(o??NaN)).toFixed(2),c=((i-parseFloat(d))*(o??NaN)).toFixed(0);return{formattedPackagePrice:(0,l.f)(s,n),formattedPricePerAsset:(0,l.f)(d,n),formattedSaveAmount:(0,l.f)(c,n)}},w=e=>{let{product:t,itemCount:r=1}=e,a=u({prices:t?.prices||{},name:t?.name}),o=t?.prices[a?.toLowerCase()]??NaN,n=y({product:t}),s=o/r;return{originalPrice:o,formattedPrice:n,pricePerItem:(0,l.f)(s.toFixed(2),a),pricePerItemRaw:s}},N=e=>{let{prices:t={},commitmentRemaining:r=0}=e,a=u({prices:t}),o=t[a?.toLowerCase()]??NaN;return{monthlyPrice:(0,l.f)(o,a),totalRemainingPrice:(0,l.f)(o*r,a)}}},426774:(e,t,r)=>{r.d(t,{l:()=>o});var a=r(651642).Buffer;let o=e=>{let t=JSON.stringify(e);return a.from(t).toString("base64")}},517596:(e,t,r)=>{r.d(t,{Y:()=>o,r:()=>n});var a=r(455729);let o=(0,a.createContext)({isEligibleForEnhanceLicensingSingleAsset:!1}),n=()=>(0,a.useContext)(o)},612847:(e,t,r)=>{r.d(t,{F:()=>i});var a=r(676534),o=r(233661),n=r(137197),s=r(524335);let i=e=>{let{assetType:t,currency:r,productName:i}=e,{getExperiment:d}=(0,s.U)();return(0,n.m)({productName:i,assetType:t})&&d(a.f.canadaPriceTest).groupName===o.IS?o.BJ:r}},670283:(e,t,r)=>{r.d(t,{T:()=>n});var a=r(676534),o=r(524335);let n=()=>{let{getExperiment:e}=(0,o.U)(),t=e(a.f.signUpOnCheckout);return{isEligibleForCon64AnonymousCheckoutExperiment:1===Number(t?.get("variant",0))}}},808059:(e,t,r)=>{r.d(t,{kN:()=>l,h6:()=>p,Cw:()=>u});var a=r(406029),o=r(467889);let n=e=>(0,o.y)()(t=>({...e,actions:{setStates:e=>t(t=>({...t,...e})),setState:(e,r)=>t(t=>({...t,[e]:r}))}}));var s=r(455729),i=r(565317);let d=(0,s.createContext)(null),l=e=>{let{children:t,initialState:r}=e,[o]=(0,s.useState)(()=>n(r));return(0,a.jsx)(d.Provider,{value:o,children:t})},c=e=>{let t=(0,s.useContext)(d);if(!t)throw Error("useConversionPanelStore must be used within CounterStoreProvider");return(0,i.P)(t,e)},u=e=>c(t=>t[e]),p=()=>c(e=>e.actions)},811401:(e,t,r)=>{r.d(t,{l:()=>p});var a=r(406029),o=r(571024),n=r.n(o);let s=n()(()=>r.e(44103).then(r.bind(r,639846)).then(e=>({default:e.EditorialTerms})),{loadableGenerated:{webpack:()=>[639846]},ssr:!1});var i=r(215075);let d=n()(()=>r.e(56895).then(r.bind(r,725831)).then(e=>({default:e.GeneratedAssetTerms})),{loadableGenerated:{webpack:()=>[725831]},ssr:!1,loading:()=>(0,a.jsx)(i.A,{height:"126px",variant:"rectangular",sx:{marginTop:"8px"}})});var l=r(498917),c=r(580030),u=r(455729);let p=e=>{let{asset:t,isTermsChecked:r=!1,setTermsCheckbox:o,showContributorDetails:n=!0}=e,i=(0,c.OK)(t),p=(0,l.iu)(t);return((0,u.useEffect)(()=>{i||p||o(!0)},[i,p,o]),i)?(0,a.jsx)(s,{asset:t,isTermsChecked:r,onCheckboxChange:o,showContributorDetails:n}):p?(0,a.jsx)(d,{isTermsChecked:r,onCheckboxChange:o}):null}},813400:(e,t,r)=>{r.d(t,{AV:()=>o,BR:()=>p,CU:()=>f,GS:()=>a,J8:()=>C,Ji:()=>l,L2:()=>d,ON:()=>u,R8:()=>n,RD:()=>c,TJ:()=>y,pp:()=>m,u3:()=>h,ye:()=>b,zm:()=>s,zz:()=>i});let a={country:"country",address1:"address1",address2:"address2",city:"city",state:"state",zip:"zip"},o={ccname:"ccname",bin:"bin",lastFour:"lastFour",brand:"brand",encryptedCardNumber:"encryptedCardNumber",encryptedCardType:"encryptedCardType",encryptedExpiryMonth:"encryptedExpiryMonth",encryptedExpiryYear:"encryptedExpiryYear",encryptedSecurityCode:"encryptedSecurityCode"},n={...a,name:"name"},s={ddname:"ddname",ddiban:"ddiban",ddbic:"ddbic"},i="Adyen3DSAuth",d="credit_card",l="direct_debit",c="sepa_direct_debit",u="paypal",p=/^\d{5}(-\d{4})?$/,m="rejected:Declined: CVC Declined",y={[d]:o,[l]:s},h="CA",b=[h],f="shutterstock",C={ORGANIZATION:"organization",CUSTOMER:"customer"}},911449:(e,t,r)=>{r.d(t,{s:()=>z});var a=r(315888),o=r(648973),n=r(754725),s=r(969185),i=r(705992),d=r(353420),l=r(532850),c=r(581298),u=r(664029),p=r(935271),m=r(302168),y=r(559044),h=r(903074),b=r(30721);let f=e=>{let{asset:t,productName:r,isBogoPromotionActive:o=!1}=e,n=(0,h.J)(),s=(0,b.i9)(),i=(0,y.sY)(t);return(n?.isFBA||!s)&&!i&&o&&r===a.uyi};var C=r(426774),w=r(529862),N=r(262593),v=r(56979),g=r(3353),A=r(346504),P=r(120638),k=r(293733),x=r(377981),_=r(819254),D=r(631549),O=r(586694),I=r(323982),T=r(524335),E=r(962316);let{NODE_CONFIG_ENV:S}=r(929143).env,B=()=>{let e=(0,E.NF)()?"production":"qa";switch(S||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}};var L=r(811407),U=r(946887),F=r(981278),M=r(455729);let z=e=>{let{products:t,asset:r,assetSize:h,couponCode:E,productId:S,productType:z=l.PZ,productOverride:j,seatCount:R,setCreateOrderStatus:Y,setIsInvalidCoupon:$,vatNumber:G,license:J,isLicenseDrawer:Z=!1,preset:H,eligibilityData:V={},existingUserRedirectPath:W,selectedShadowsOption:K,shouldForceAsset:q=!1,subscriptionIdentifier:Q,cancellationReason:X,additionalCheckoutQueryParams:ee,orderFlow:et,checkoutAction:er}=e,{region:ea}=(0,c.Y)(),{isIndiaRegion:eo}=(0,k.Z)(),{data:en}=(0,b.rA)(),{data:es}=(0,D.J)(),ei=(0,b.i9)(),ed=(0,_.o)(),[el,ec]=(0,M.useState)(!1),[,eu]=(0,I.p)(r)||[],{eligibilityCurrency:ep,debitableIdentifier:em}=V,ey=(0,O.Jz)()||(0,L.vb)(),{checkGate:eh}=(0,T.U)(),eb=eh(s.M5),ef=(0,M.useMemo)(()=>j??{...(0,m.eO)(t,S),...R?{seatCount:R}:{}},[j,S,t,R]),eC=ef?.id,{asPath:ew}=(0,F.useRouter)(),eN=(0,A.wb)({prices:ef?.prices??{},name:ef?.name}),{data:ev}=(0,v.$)({shouldFetch:!!ei}),eg=f({asset:r,productName:ef.name}),eA=E||ef.couponCode,eP=(0,P.Rt)({cookies:void 0,signUpView:void 0,queryParams:{landing_page:(0,N.$)({couponCode:eA,productId:eC,vatNumber:G,seatCount:ef?.seatCount,doNotRedirect:!0,asset:eo||q?r:void 0,existingUserRedirect:W||eu,license:J,additionalGenerateCheckoutParams:ee,promotions:ef?.promotions}),...H&&{preset:H}}}),ek=(0,M.useCallback)(()=>{window&&(U.A.set(n.uc,ew),window.NREUM?.addPageAction?.("UP3-1623 assign loggedOutHandler authRedirectPath to href",{...window.location||{},asPath:ew,authRedirectPath:eP}),window.location.href=eP)},[ew,eP]),ex=(0,p.Z5)({paymentProfiles:ev}),e_=(0,M.useCallback)(e=>{let t={createTime:en?.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:es?.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:en?.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:en?.id,username:en?.username,isLicenseDrawer:Z};window.NREUM?.noticeError?.(e,t)},[es,en,Z]),eD=(0,g.J)({additionalQueryParams:{...ee,...er&&{checkoutAction:er}},couponCode:eA}),eO=(0,x.h)(),[eI,eT]=(0,M.useState)({status:"",error:void 0}),eE=(0,M.useCallback)(async()=>{try{if(Y?.({status:"",error:void 0}),eT({status:"",error:void 0}),ec(!0),ev){let e=r?{assets:[{asset:r,selectedAssetSize:(0,u.aZ)({assetType:(0,y.f0)(r),assetSize:h})}]}:{},t=[];t.push({...e,product:ef,productType:z});let n=ef.name===a.rVp,l=eh(s.gx),c=n&&l?(0,C.l)(d.ju[a.rVp]):void 0;null!=X&&null!=Q&&t.push({product:{id:B(),type:"products"},cancellationReason:X,subscriptionIdentifier:Q});let{headers:m}=(0,w.H)({trackingId:ey,headers:{[i.DF]:ed}})||{},{data:b}=await (0,p.fS)({country:ea,currency:ep||eN,paymentProfileId:ex?.paymentId,orderItems:t,selectedShadowsOption:K,vatNumber:G,couponCode:eA,promotions:ef?.promotions??c,license:J,debitableIdentifier:em,configs:{headers:m},isEligibleForUnlimitedBogoPromotion:eg,isClickToCancelARGateEnabled:eb,isFootageSelect:!!r&&(0,y.ex)(r)});eO({actionName:"convert - order creation success",customAttributes:{productName:ef.name,productType:z,country:ea,currency:ep||eN,assetType:(0,y.f0)(r),assetSize:h,license:J,isLicenseDrawer:Z,orderFlow:et,couponCode:eA,orderId:b.id}}),Y?.({status:o.qO,error:void 0}),eT({status:o.qO,error:void 0}),ec(!1),eD({orderId:b.id})}ec(!1)}catch(e){Y?.({status:o.Nz,error:e}),eT({status:o.Nz,error:e}),ec(!1),e?.detail?.toLowerCase()===l.s_&&$?.(!0),e_(e)}},[Y,ev,r,h,ef,z,eh,X,Q,ey,ed,ea,ep,eN,ex?.paymentId,K,G,eA,J,em,eg,eb,eO,Z,et,eD,e_,$]);return{createOrderHandler:ei?eE:ek,isCreateOrderInProgress:el,product:ef,orderStatus:eI,createOrderHandlerLoading:ei&&!ev}}},935271:(e,t,r)=>{r.d(t,{NM:()=>x,fS:()=>P,Z5:()=>v});var a=r(487519),o=r(914689),n=r(315888),s=r(392684),i=r(532598),d=r(338436),l=r(813631),c=r(532850),u=r(398426);let p=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[a]=e,{media:o,...s}=a,i=o?.[0]||{};switch(i.type){case l.W1:t=`${n.lcL}-var-0004`;break;case l.FY:t=u.eJ;break;case l.M9:t=u.Xs;break;case l.G_:t=n.t8m[i.size],r&&(t=n.fV_);break;default:return e}return[{...s,media:[]},{product:{id:t,type:c.Uy},media:[i]}]};var m=r(353420),y=r(426774);let h=()=>(0,y.l)(m.ju[n.uyi]);var b=r(559044),f=r(531950),C=r(884378);let w="production"!==r(929143).env.NODE_CONFIG_ENV,N=e=>{switch(e.paymentMethod){case o.L2:return{paymentId:e.id,expirationMonth:e?.creditCard?.expMonth,expirationYear:e?.creditCard?.expYear,maskedNumber:e?.creditCard?.maskedNumber,cardType:e?.creditCard?.type,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.RD:return{paymentId:e.id,bic:e?.sepaDirectDebit?.bic,maskedIBAN:e?.sepaDirectDebit?.maskedIban,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.ON:return{paymentId:e.id,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit,email:e.email};default:return null}},v=e=>{let{paymentProfiles:t=[]}=e;return Array.isArray(t)&&0!==t.length?N(t.find(e=>!0===e.isDefault)||t[0]):null},g=e=>{let{orderItems:t=[],license:r,country:a="",debitableIdentifier:u,selectedShadowsOption:p,isClickToCancelARGateEnabled:m=!1}=e;return t.map(e=>{let{product:{id:t,eligibleForRebilling:y,seatCount:h,name:f=""}={},productType:C,assets:w,paymentMethod:N,subscriptionIdentifier:v,cancellationReason:g,cancellationReasonName:A}=e,P=v&&g?{subscription_identifier:v,cancellation_reason:g,...A&&{cancellation_reason_name:A}}:{},k=[];return h&&(P.seat_count=h),N?.type!==o.gU&&(P.subscription_id=N?.id),w?.length&&(k=w.map(e=>{let{asset:t,selectedAssetSize:a}=e,o=(0,b.Ub)(t),n=(0,b.OJ)(t);return{type:o,id:t.id,license:r,...n&&{format:d.mx,size:d.mx,headline:t.title},...a?.size&&{size:a.size},...a?.format&&{format:a.format},...o===l.W1&&t.imageType===l.m$&&{angle:t.angle||s.R,content_provider:l._Y,...a?.format!==i.yC&&{include_shadows:"on"===(p||"on").toLocaleLowerCase()}}}})),P.auto_renewal=y&&C===c.PZ&&!n.F7K.includes(a)&&!n.KGB.includes(f),P.debitable_identifier=u,m&&n.Khw.includes(f)&&(P.auto_refill=!1),{product:{id:t,type:C||c.Uy},...k&&{media:k},...Object.keys(P).length>0&&{meta:P}}})},A=e=>{let{currency:t,country:r,paymentProfileId:a,items:o,couponCode:n,vatNumber:s,promotions:i}=e;return{data:{type:"orders",attributes:{currency:t,items:o,country:r,payment_profile_id:a,coupons:n?[{type:"coupon",name:"coupon",coupon_code:n}]:[],client_data:{},vat_override:s||void 0,...i&&{promotions:i}}}}},P=async e=>{let{country:t,couponCode:r,currency:o,orderItems:n=[],selectedShadowsOption:s,paymentProfileId:i,vatNumber:d,configs:l={},license:u=c.sU,debitableIdentifier:m,promotions:y,isEligibleForUnlimitedBogoPromotion:b=!1,isClickToCancelARGateEnabled:N=!1,isFootageSelect:v=!1}=e,P=g({orderItems:n,license:u,country:t,debitableIdentifier:m,selectedShadowsOption:s,isClickToCancelARGateEnabled:N});b&&(P=p(P,v));let k=(0,a._u)().formattedUrl,x=A({country:t,couponCode:r,promotions:b?h():y,currency:o,items:P,paymentProfileId:i,vatNumber:d});return f.Bn.post(k,x,{...l,...w&&{timeout:3e4}}).then(e=>({headers:e.headers,data:(0,C.A)(e.data)}))},k=e=>{let{orderItems:t=[],country:r="",debitableIdentifier:a}=e;return t.map(e=>{let{product:{id:t,license:s,name:i="",productType:l,eligibleForRebilling:u,seatCount:p}={},assets:m,paymentMethod:y}=e,h={...p&&{seat_count:p},...y?.type!==o.gU&&{subscription_id:y?.id}},f=[];return m?.length&&(f=m.map(e=>{let{asset:t,selectedAssetSize:r}=e,a=(0,b.OJ)(t);return{type:(0,b._$)(t),id:t.id,license:s,...a&&{format:d.mx,size:d.mx,headline:t.title},...r?.size&&{size:r.size},...r?.format&&{format:r.format}}})),h.auto_renewal=u&&l===c.PZ&&!n.F7K.includes(r)&&!n.KGB.includes(i),h.debitable_identifier=a,{product:{id:t,type:l||c.Uy},...f&&{media:f},...Object.keys(h).length>0&&{meta:h}}})},x=async e=>{let{country:t,currency:r,orderItems:o,paymentProfileId:n,vatNumber:s,configs:i={},debitableIdentifier:d,promotions:l}=e,c=k({orderItems:o,country:t,debitableIdentifier:d}),u=(0,a._u)().formattedUrl,p=A({country:t,currency:r,items:c,paymentProfileId:n,vatNumber:s,promotions:l}),m=await f.Bn.post(u,p,{...i,...w&&{timeout:3e4}});return{headers:m.headers,data:(0,C.A)(m.data)}}},952872:(e,t,r)=>{r.d(t,{L:()=>C});var a=r(648973),o=r(969185),n=r(705992),s=r(532850),i=r(581298),d=r(664029),l=r(935271),c=r(302168),u=r(559044),p=r(3353),m=r(346504),y=r(377981),h=r(819254),b=r(524335),f=r(455729);let C=e=>{let{products:t,asset:r,assetSize:C,couponCode:w,productId:N,productType:v=s.PZ,productOverride:g,setIsInvalidCoupon:A,setCreateOrderStatus:P,license:k}=e,{region:x}=(0,i.Y)(),_=(0,h.o)(),[D,O]=(0,f.useState)(!1),I=(0,f.useMemo)(()=>g??{...(0,c.eO)(t,N)},[g,N,t]),T=(0,m.wb)({prices:I?.prices??{}}),{checkGate:E}=(0,b.U)(),S=E(o.M5),B=(0,f.useCallback)(e=>{let t={component:"useCreateAnonymousOrder.ts",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateAnonymousOrder",errorTitle:e.title,msg:"CON-21: Anonymous order creation failed",referrerPath:window.location.pathname,referrerQuery:window.location.search,anonymousId:_};window.NREUM?.noticeError?.(e,t)},[_]),L=(0,p.J)({couponCode:w}),U=(0,y.h)(),[F,M]=(0,f.useState)({status:"",error:void 0});return{createOrderHandler:(0,f.useCallback)(async()=>{try{P?.({status:"",error:void 0}),M({status:"",error:void 0}),O(!0);let e=r?{assets:[{asset:r,selectedAssetSize:(0,d.aZ)({assetType:(0,u.f0)(r),assetSize:C})}]}:{},t=[];t.push({...e,product:I,productType:v});let{data:o}=await (0,l.fS)({country:x,currency:T,orderItems:t,couponCode:w,license:k,isClickToCancelARGateEnabled:S,configs:{headers:{[n.DF]:_,[n.s4]:n.o}}});P?.({status:a.qO,error:void 0}),M({status:a.qO,error:void 0}),O(!1),L({orderId:`shutterstock.${o.id}`}),U({actionName:"CON-64 - anonymous order creation success",customAttributes:{productName:I.name,productType:v,country:x,currency:T,assetType:(0,u.f0)(r),assetSize:C,license:k}}),O(!1)}catch(e){P?.({status:a.Nz,error:e}),M({status:a.Nz,error:e}),O(!1),e?.detail?.toLowerCase()===s.s_&&A?.(!0),B(e)}},[P,r,C,I,v,x,T,w,k,S,_,L,U,B,A]),isCreateOrderInProgress:D,product:I,orderStatus:F}}}}]);
//# sourceMappingURL=BuyAndDownloadButton.18b35c2479768bdb.js.map